# MLTD时间轴提取器
本项目旨在从《偶像大师百万现场剧场时光（アイドルマスター ミリオンライブ! シアターデイズ）》的游戏视频中提取时间轴，并利用 **硬字幕提取工具10.0** 生成 SRT 字幕文件。同时，该项目还提供了用于提取《偶像大师闪耀色彩（アイドルマスター シャイニーカラーズ）》和《东京七姐妹（Tokyo 7th Sisters）》游戏的相关参数。

您可以根据需要自行修改或添加参数，以满足更多游戏的字幕提取需求。

## 1. 安装依赖并配置环境

1. 安装 [FFmpeg](https://www.ffmpeg.org/)，并将安装路径添加到环境变量中。

2. 打开本文件所在的文件夹，按住 Shift 键并右键点击空白处，在当前目录打开 PowerShell 窗口。

3. 输入以下命令安装相关依赖：
```
pip install -r requirements.txt
```

## 2. 运行获取时间轴字幕文件

1. 打开 `main.py`，修改需要自行设置的参数。

2. 输入以下命令运行程序，等待完成：
```
python main.py
```

3. 运行结束后，您将得到一个仅包含时间轴信息的 SRT 字幕文件。

## 3. OCR 提取原字幕

1. 下载并安装 [硬字幕提取工具10.0](https://zhuanlan.zhihu.com/p/559874793)。

2. 备份软件目录下的 `config.ini` 和 `log.txt` 文件。如果软件卡死没有其他解决方法，可以尝试覆盖这两个文件。

3. 双击运行软件。此时软件窗口左上角标题栏应显示“視頻截圖、刪合窗”。

4. 按照“**硬字幕提取工具10.0 用户使用手册.docx**”中的指引，申请 OCR 的 API 并配置给软件。建议勾选“識別為單行”和“極速曡圖”。

5. 点击左上的 "Browse" 按钮，选择本项目所在目录下的 ``./img/text_raw``。软件会自动加载图片，并读取时间轴信息。（必须选择未经处理的 `text_raw`，选择 `text_bw` 可能会导致软件崩溃）

   如果软件未能成功获取时间轴信息，可以在“系統設置”中打开“生成.TXT”选项，稍后手动与字幕文件合并。

6. 按照手册指引，完成 OCR。您可以在 `./img/text_raw` 目录下找到 `123.srt` 文件（和相应的 txt 文件）。


## 支持与问题反馈

如果您在使用过程中遇到问题或有任何疑问，请在项目的 [Issues 页面](https://github.com/niteshien/mltd-timestamp-extractor/issues) 提交新的 issue。您也可以通过以下联系方式与我取得联系。


## 联系信息

- 微博: [@米拉博雷亞斯](https://weibo.com/u/7733258030)
- 哔哩哔哩: [@Nitebaka](https://space.bilibili.com/5584028)
- 邮箱: niteshien@outlook.com

## 版权声明

本项目的大部分代码由 OpenAI 的 GPT-4 模型贡献。

## 许可证

本项目采用 [MIT 许可证](LICENSE)。您可以自由地使用、分发和修改本项目的代码，但请遵循许可证条款。
